<!-- Margaret Flemings and Maggie Jennings -->
<!-- Template for the quiz page, currently loads all questions from a deck on the same page-->
<!-- No grading right now, add in next round -->
{% extends 'codemode.html' %}
  {% block content %}

    {% for question in questions %}
  <!--  <form onsubmit="return grading()"> -->
  <div class="question">
	 <p data-answer="{{question['answer']}}">{{question['questionText']}}</p>
	    {% if question['qtype'] == 'multi' %}
      <!-- for each multiple choice question show options -->
         <input type="radio" name="quiz" value="{{question['answer']}}">{{question['answer']}}<br>
	       <input type="radio" name="quiz" value="{{question['wrong1']}}">{{question['wrong1']}}<br>
 	       <input type="radio" name="quiz" value="{{question['wrong2']}}">{{question['wrong2']}}<br>
 	       <input type="radio" name="quiz" value="{{question['wrong3']}}">{{question['wrong3']}}<br>
	    {% else %}
		    {% if question['qtype'] == 'truefalse' %}
        <!-- true or false questions -->
				 <input type="radio" name="quiz" value="true">True<br>
 	       <input type="radio" name="quiz" value="False">False<br>
        {% else %}
            <!-- question is fill in blank -->
            <input type="text" name="quiz">
        {% endif%}
      {% endif %}
      <br>
      <button onclick="grading()">Grade</button>
      <div id="questionResult"></div>
      <div id="explanation"></div>
    </div>

  <!-- </form> -->
      {% endfor %}

      <div id="totalResult"></div>

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
      <script>
      function grading(){
          var points = 0;
          var radioVal = $("input[name='quiz']:checked").val();
          var textVal = $("input[name='quiz'][type='text']").val();
          var correctAnswer = $('p').attr('data-answer');
          console.log(radioVal);
          console.log(textVal);
          console.log(correctAnswer);
          if (radioVal == correctAnswer || textVal == correctAnswer){
            $('#questionResult').text('Correct!');
            console.log("Correct!");
          } else{
            $('#questionResult').text('Wrong!');
            console.log('Wrong!');
          }
          return false;
      }
      </script>
 {% endblock %}
